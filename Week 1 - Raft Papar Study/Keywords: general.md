# Keywords

## 정의

- Byzantine Faults 비잔틴 결함: 무작위로 잘못된 행동을 하는 노드. 노드에 결함이 있거나, 악의적으로 잘못된 동작을 할 경우 비잔틴 결함이 있다고 한다. 노드가 거짓말을 하는 것. 예) 실제로는 받지 않은 메세지인데 수신했다고 응답하는 경우.

  - ﻿﻿Two Generals' Problem 두 장군 문제: 네트워크를 통해 통신하는 두 노드 간 합의가 영원히 이루어지지 않을 수 있음을 설명하기 위한 사고실험.
  - Byzantine Generals' Problem 비잔틴 장군 문제: 신뢰할 수 없는 환경에서 합의에 도달하는 문제

  - ﻿﻿Byzantine Fault-Tolerance 비잔틴 내결함성: 비잔틴 장군 문제가 발생하더라도 시스템이 올바르게 작동할 수 있는 성질

- ﻿﻿CAP Theorem CAP 이론: 분산 시스템은 consistency, availability, partition tolerance 중 최대 2가지만 동시에 보장할 수 있다는 이론.

  - Consistency 일관성: 읽기 연산에 성공했다면 항상 가장 최신 버전의 데이터를 응답하는 성질
  - Availability 가용성: 장애가 나지 않은 정상 노드에 보내는 요청에는 항상 응답한다는 성질
  - ﻿﻿Partition tolerance 분할 내성: 네트워브 파티션이 발생하더라도 시스템은 계속 제대로 동작한다는 성질

  - ﻿﻿예) 노드 3개인 시스템에서 노드 간 데이터 동기화를 하던 도중 노드 하나가 죽음

    - ﻿﻿AP System: 데이터 일관성을 희생하여 가용성과 분할 내성을 보장하는 시스템. 임시로 나머지 두 노드에서 클라이언트 요청을 처리하고, 노드 복구 이후 데이터 복구 과정을 통해 동기화.

    - ﻿﻿CP System: 가용성을 희생하여 일관성과 분할 내성을 보장하는 시스템. 노드가 완전히 복구되기 전까지 클라이언트 요청을 받을 수 없음.

    - ﻿﻿CA System: 분할 내성을 희생하여 가용성과 일관성을 보장하는 시스템. 현실에서는 존재할 수 없는 시스템. 네트워크 장애는 인간이 막을 수 있는게 아니기 때문.

  - 일관성에 대한 정의가 모호하고 몇가지 오류가 있어 실무에서 오해하기 딱 좋은 이론.. 이라고 한다.

- Consistency Models 일관성 모델: 일관성의 수준에 따라 분류한 것

  - Strong consistency 강한 일관성: 클라이언트는 항상 out-of-date 된 데이터가 아닌 최신 버전 데이터를 보게 됨. 예) 클라이언트 요청을 받아들이는 노드 간 동기화를 동기적으로 처리하는 경우.
  - Weak consistency 약한 일관성: 항상 최신 데이터를 읽을 수 있다는 보장이 되지 않음. 예) 클라이언트 요청을 받아들이는 노드 간 동기화를 비동기로 처리하는 경우.
  - Eventual consistency 최종 일관성, 결과적 일관성, ...: 약한 일관성의 일종. 쓰기 연산의 결과가 언젠가는 모든 노드에 동일하게 동기화되지만, 그 전까지 클라이언트에게 out-of-date 된 데이터를 보여줄 수 있음.

- Sync vs. Async

  - Sync 동기식: callee의 실행 결과를 확인하는 것
  - Async 비동기식: callee의 실행 결과를 확인하지 않는 것

- FLP Theorem FLP 이론: 메세지가 지연되기만 하고 손실은 되지 않는 비동기 네트워크 환경에서, 1개 이상의 노드에 장애가 발생한 경우 모든 시작 조건에서(?) 모든 노드의 합의가 완료되는 '완벽한' 합의 알고리즘은 없다는 이론. Safety 와 Liveness 가 동시에 보장될 수 없음을 의미한다.

- Consensus 합의: 분산 시스템에서 여러 노드가 어떤 사안에 대해 동의하는 것. 일종의 공유 메모리.

## Raft 와 연관지어보기

* Raft 는 **강한 일관성**을 보장하는 **합의** 알고리즘이며, **non-byzantine 환경 **에서 Safety 를 보장하는 **CP 시스템**이다.
* Raft 는 데이터 동기화를 **동기식**으로 진행한다. 리더가 팔로워의 ACK 를 받은 다음 로그를 커밋하기 때문이다.