# Safety Machine Property

- Raft는 특정 조건에만 로그 항목을 커밋한다.
- 리더는 로그가 다수 서버에 복제 되었을때만 커밋한다.
- 이 방식을 통해 로그의 일관성(동일한 로그, 동일한 순서)을 유지한다.

## 안전성 보장 원칙

1. 선거 안전성 (`Election Safety`)
   - **원칙:** 주어진 임기(term)에는 최대 하나의 리더만 선출될 수 있음
   - **설명:** 리더가 되는 후보는 다수의 표를 얻어야 함. 각 서버는 주어진 임기에 하나의 후보에게만 투표할 수 있으므로, 한 임기에 두 명 이상의 리더가 나올 수 없음
2. 리더 추가 전용 (`Leader Append-Only`)
   - **원칙:** 리더는 자신의 로그에서 항목을 덮어쓰거나 삭제하지 않으며, 새로운 항목만 추가함
   - **설명:** 리더는 기존 로그 항목을 변경하지 않고 새로운 명령을 로그 끝에 추가. 이로 인해 로그의 일관성이 유지됩니다.
3. 로그 일치 (`Log Matching`)
   - **원칙:** 두 로그가 동일한 인덱스와 임기의 항목을 포함하면, 해당 인덱스까지의 모든 항목이 동일.
   - **설명:** 로그가 동일한 인덱스와 임기의 항목을 포함하면 그 이전의 모든 항목도 일치하게 됨. 이는 로그의 일관성을 유지하는 데 중요
4. 리더 완전성 (`Leader Completeness`)
   - **원칙:** 주어진 임기에 커밋된 로그 항목은 그 이후 임기의 모든 리더의 로그에 존재하게 됨
   - **설명:** 특정 임기에 커밋된 로그 항목은 그 이후 임기에 선출된 리더의 로그에도 반드시 존재해야함. 이는 리더가 변경되더라도 로그의 일관성과 데이터의 무결성을 보장
5. 상태 머신 안전성 (`State Machine Safety`)
   - **원칙:** 서버가 특정 인덱스에서 로그 항목을 상태 머신에 적용했다면, 다른 서버는 동일한 인덱스에 다른 로그 항목을 적용하지 않음
   - **설명:** 로그의 특정 인덱스에 적용된 항목은 클러스터의 다른 서버에서도 동일하게 적용되어야 함. 다른 로그 항목이 동일한 인덱스에 적용되지 않도록 보장하여 상태 머신의 일관성을 유지
