# Election timeout

Election timeout은 **리더가 사라졌을 때 새로운 리더를 선출하기 위해 팔로워가 후보자로 전환되는 시간을 정의한 것**으로 팔로워가 일정 시간 동안 리더로부터 메시지를 받지 못했을 때 발생하는 timeout 이벤트 이다. 이 타이머가 만료되면 팔로워는 리더가 더이상 살아있지 않다고 판단하고 자신을 후보자로 선출하여 새로운 리더를 뽑는 과정을 시작한다.

## Election timeout의 주요 단계

1. 초기 상태: 클러스터의 모든 노드는 기본적으로 팔로워 상태
2. 리더 부재 상태: 만약 리더가 실패하거나 리더로부터의 메시지가 오지 않으면 팔로워의 Election timeout 타이머가 시작됨
3. 후보자 상태 전환: Election timeout이 만료되면 팔로워는 후보자로 전환되고, 자신에게 투표를 요청하는 요청을 다른 노드들에게 보냄
4. 투표 과정: 다른 노드들은 각자 자신의 Election timeout이 만료되기 전까지 후보자의 요청을 받고 투표, 과반수(정족수)의 투표를 받은 후보자는 리더로 선출
5. 리더 선출: 새로운 리더가 선출되면, 다른 모든 노드들은 리더의 메시지를 받고 자신읠 상태를 다시 팔로워로 전환

## Election timeout이 왜 중요한가?

이는 시스템의 `가용성`과 `일관성`을 보장하는 데 필수적이다. 타이머의 길이가 너무 짧거나 길면 문제가 발생할 수 있다.

- 타이머가 짧을 시 - 잦은 리더 선출로 인한 시스템 불안전
- 타이머가 길 시 - 리더 실패 시 새로운 리더 선출이 지연되어 시스템 가용성 저하

#### 타이머 설정

일반적으로 `150m~300m` 범위 안에서 랜덤하게 정해지며(권장), 이는 각 클러스터 환경에 따라 조정이 될 수 있다.
