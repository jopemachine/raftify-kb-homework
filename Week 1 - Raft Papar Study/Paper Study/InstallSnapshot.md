### 스냅샷

<hr>

시스템이 작동함에 따라 필연적으로 수많은 로그들이 쌓이게 된다. 이는 다음과 같은 문제가 발생한다.

1. **새로운 노드에 로그를 복제하는 문제**: 너무 많은 로그를 복사하고 적용하기에 그 시간을 예측할 수 없다.
2. **노드들에 로그를 복제하는 문제**: 리더가 팔로워에게 로그를 덮어 씌우거나, 로그를 복제하는데 있어 위와 비슷한 이유로 시간이 오래 걸릴 수 있다.
3. **로그를 저장하는데 자원은 무한하지 않다**: 따라서 한정된 자원 내에서 효율적으로 로그를 관리할 필요가 있다.

이 문제들을 해결하기 위해 스냅샷을 사용한다. 스냅샷은 로그들을 상태머신에 적용한 결과를 일반화하여 저장하는 것으로, 일종의 로그 압축 기능을 한다.

### 스냅샷을 만드는 대상

<hr>

Raft에서 리더가 많은 역할을 하기 때문에 리더만 스냅샷을 만들 것 같지만, 팔로워들도 자체적으로 스냅샷을 생성한다. 오히려 이렇게 하는 것이 더 유리하다.

그 이유는 다음과 같다.

1. **스냅샷 생성에 많은 자원이 필요하다**: 리더는 클라이언트의 요청을 처리해야 하는데, 스냅샷을 생성하는 데 많은 자원을 사용하면 가용성에 문제가 생긴다. 컴퓨터 자원을 포함하여 팔로워에게 스냅샷을 전송하기 위한 네트워크 대역폭 또한 낭비된다.
2. **리더의 구현을 복잡하게 한다**: 팔로워들이 스냅샷을 생성함으로써 리더의 구현을 간소화할 수 있다.